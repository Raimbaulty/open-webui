"""
title: 关闭思考模式
description: 为模型名称添加 -think-0 后缀关闭思考
"""

from pydantic import BaseModel, Field
from typing import Optional, List, Dict, Any


class Filter:
    class Valves(BaseModel):
        priority: int = Field(default=100, description="优先级")
        pass

    def __init__(self):
        self.valves = self.Valves()
        self.toggle = True
        self.icon = """data:image/svg+xml;charset=utf-8;base64,PHN2ZyB0PSIxNzUzMDg5MDM1MzE0IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjExOTIyIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTQxNiAxMjhjLTYxLjEyIDAtMTEwLjYyNCA0NC4zODQtMTIzLjAwOCAxMDIuMDE2QzIxOC4zNjggMjQzLjMyOCAxNjAgMzA1LjYgMTYwIDM4NGMwIDcuODcyIDAuODY0IDE0Ljg4IDIuMDE2IDIyLjAxNkMxNDEuMzc2IDQzNi4zNTIgMTI4IDQ3Mi4wOTYgMTI4IDUxMmMwIDU3LjUwNCAyOC42NCAxMDUuODg4IDY4Ljk5MiAxNDAuOTkyLTIuODggMTEuMzkyLTQuOTkyIDIyLjc1Mi00Ljk5MiAzNS4wMDggMCA3OS4xMzYgNjQuODY0IDE0NCAxNDQgMTQ0aDIuMDE2YzE4LjYyNCAzNi4xMjggNTAuODggNjQgOTMuOTg0IDY0YTExMS42OCAxMTEuNjggMCAwIDAgODAtMzQuMDE2QTExMS42OCAxMTEuNjggMCAwIDAgNTkyIDg5NmM0My4xMzYgMCA3NS4zNi0yNy44NzIgOTQuMDE2LTY0aDEuOTg0Yzc1LjEzNiAwIDEzNi43MzYtNTguNDk2IDE0My4wMDgtMTMySDgzMmMwLTIuMDE2LTAuODY0LTQtMC45OTItNi4wMTYgMC4xMjgtMS45ODQgMC45OTItNCAwLjk5Mi01Ljk4NCAwLTExLjg3Mi00LjI1Ni0yMi4wMTYtNy4wMDgtMzIuOTkyQzg2Ni40OTYgNjE5Ljc0NCA4OTYgNTcwLjUyOCA4OTYgNTEyYzAtMzkuODcyLTEzLjM3Ni03NS42MTYtMzQuMDE2LTEwNi4wMTYgMS4xNTItNy4xMDQgMi4wMTYtMTQuMDggMi4wMTYtMjEuOTg0IDAtNzguNC01OC4zNjgtMTQwLjY0LTEzMi45OTItMTU0LjAxNkM3MTguNjI0IDE3Mi40MTYgNjY5LjEyIDEyOCA2MDggMTI4Yy0zOC40IDAtNzIuNTEyIDE3Ljg4OC05NiA0NC45OTJDNDg4LjUxMiAxNDUuOTIgNDU0LjQgMTI4IDQxNiAxMjh6IG0wIDY0YzM1Ljc0NCAwIDY0IDI4LjI1NiA2NCA2NHY2NGMwIDUzLjM3Ni00Mi42MjQgOTYtOTYgOTZ2NjRjMzYuMjU2IDAgNjkuMTItMTIuNDggOTYtMzIuOTkyVjc4NGMwIDI2Ljg4LTIxLjEyIDQ4LTQ4IDQ4YTQ3LjA0IDQ3LjA0IDAgMCAxLTQ3LjAwOC0zOS4wMDhsLTUuOTg0LTMwLjk3Ni0zMS4wMDggNC45OTJBNzkuNTg0IDc5LjU4NCAwIDAgMSAyNTYgNjg4YzAtOS44ODggMS42LTE5LjEzNiA0Ljk5Mi0yOCAwLjI1Ni0wLjczNiAwLjc2OC0xLjI4IDAuOTkyLTIuMDE2IDkuOTItMjQuNjA4IDMxLjM5Mi00Mi42MjQgNTguMDE2LTQ4bC0xMi45OTItNjIuOTc2QTE0Mi40NjQgMTQyLjQ2NCAwIDAgMCAyMjQgNTk2Ljk5MiAxMjYuNjU2IDEyNi42NTYgMCAwIDEgMTkyIDUxMmExMjQuOCAxMjQuOCAwIDAgMSAyOC03OS4wMDhsMTAuMDE2LTEyLTMuMDA4LTE2QTkxLjQ1NiA5MS40NTYgMCAwIDEgMjI0IDM4NGMwLTUzLjM3NiA0Mi42MjQtOTYgOTYtOTZoMzJWMjU2YzAtMzUuNzQ0IDI4LjI1Ni02NCA2NC02NHogbTE5MiAwYzM1Ljc0NCAwIDY0IDI4LjI1NiA2NCA2NHYzMmgzMmM1My4zNzYgMCA5NiA0Mi42MjQgOTYgOTYgMCA2Ljg4LTEuMjggMTMuNTA0LTMuMDA4IDIwLjk5MmwtMi45NzYgMTYgOS45ODQgMTJBMTI0LjggMTI0LjggMCAwIDEgODMyIDUxMmMwIDM4LjQtMTYuMzg0IDcyLjY0LTQzLjAwOCA5Ni0yMS44NTYtMTkuMzYtNDkuNzI4LTMyLTgwLjk5Mi0zMi0zMC4yNCAwLTU3LjUwNCAxMC43NTItNzkuMDA4IDI4Ljk5Mmw0MS4wMjQgNDkuMDI0QTU3Ljc5MiA1Ny43OTIgMCAwIDEgNzA4IDY0MGMzMC44OCAwIDU1LjQ4OCAyMy4xMzYgNTkuMDA4IDUyLjk5MkM3NjQuMzg0IDczNS4xMzYgNzMwLjc1MiA3NjggNjg4IDc2OGMtMi44OCAwLTYuNC0wLjEyOC0xMi0wLjk5MmwtMzEuMDA4LTUuMDI0LTUuOTg0IDMxLjA0QTQ3LjA0IDQ3LjA0IDAgMCAxIDU5MiA4MzJjLTI2Ljg4IDAtNDgtMjEuMTItNDgtNDhWNDQ3LjAwOEExNTcuMjggMTU3LjI4IDAgMCAwIDY0MCA0ODB2LTY0Yy01My4zNzYgMC05Ni00Mi42MjQtOTYtOTZWMjU2YzAtMzUuNzQ0IDI4LjI1Ni02NCA2NC02NHoiIHAtaWQ9IjExOTIzIj48L3BhdGg+PC9zdmc+"""
        pass

    def inlet(self, body: dict, user: Optional[dict] = None) -> dict:
        model_name = body.get("model")
        if isinstance(model_name, str):
            # 检查模型名称是否已经包含"-think-0"后缀，避免重复添加
            if "-think-0" not in model_name:
                # 如果模型名称以"-search"结尾，需要将"-think-0"插入到"-search"前面
                if model_name.endswith("-search"):
                    base_name = model_name[:-7]  # 移除"-search"
                    body["model"] = base_name + "-think-0-search"
                else:
                    # 直接在模型名称后面添加"-think-0"后缀
                    body["model"] = model_name + "-think-0"
        return body
